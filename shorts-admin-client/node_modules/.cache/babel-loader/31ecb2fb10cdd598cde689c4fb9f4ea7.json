{"ast":null,"code":"var _jsxFileName = \"/Users/eastroad/workspace/shorts-admin/shorts-admin-client/src/components/common/Header.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logoutUser } from './../state/reducers/authReducer';\nimport PropTypes from 'prop-types';\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Popper, Link, MenuItem, MenuList, Box, SwipeableDrawer, List, ListItem, ListItemText, Divider } from '@material-ui/core';\nimport { AppBar, ClickAwayListener, Toolbar, Typography, Button, Hidden } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { PATH, ROLE } from './Constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst unAuthMenus = [{\n  title: \"로그인\",\n  url: PATH.LOGIN\n}];\nconst authMenus = [{\n  title: \"Home\",\n  url: PATH.DASHBOARD,\n  authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN]\n}, // { title: \"승인회원신청\", url: PATH.LICENSE_REQUIRE, authorities: [ROLE.USER] },\n{\n  title: \"위험분석\",\n  url: PATH.RISK_ANAYSIS_LIST,\n  authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN] // subMenu: [\n  //     { title: \"사건 등록\", url: PATH.ACCIDENT_CREATE, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n  //     { title: \"진단 결과 조회\", url: PATH.ACCIDENT_RESULT, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n  //     { title: \"감정서 입력\", url: PATH.ACCIDENT_CREATE, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n  //     { title: \"감정서 조회\", url: PATH.ACCIDENT_PREVIEW, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n  // ]\n\n}, {\n  title: \"예·관측 자료\",\n  url: '',\n  authorities: [ROLE.LICENSE, ROLE.ADMIN],\n  subMenu: [{\n    title: \"관측 자료\",\n    url: PATH.OBSERVATION,\n    authorities: [ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"노면 온도 맵\",\n    url: PATH.OBSERVATION_ROAD,\n    authorities: [ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"모델 결과\",\n    url: PATH.OBSERVATION_MODEL,\n    authorities: [ROLE.LICENSE, ROLE.ADMIN]\n  }]\n}, {\n  title: \"관리\",\n  url: '',\n  authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n  subMenu: [{\n    title: \"위험 분석\",\n    url: PATH.ADMIN_ACCIDENT_LIST,\n    authorities: [ROLE.ADMIN]\n  }, {\n    title: \"관측소\",\n    url: PATH.ADMIN_OBSERVATORY_LIST,\n    authorities: [ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"코드\",\n    url: PATH.ADMIN_CODE_INFO,\n    authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"도로관리\",\n    url: PATH.ADMIN_ROAD_INFO,\n    authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"계정 관리\",\n    url: PATH.ADMIN_USER_LIST,\n    authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN]\n  }, {\n    title: \"사용자 관리\",\n    url: PATH.ADMIN_USER_READ,\n    authorities: [ROLE.ADMIN]\n  }]\n}, {\n  title: \"테스트\",\n  url: '',\n  authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n  subMenu: [{\n    title: \"대시보드\",\n    url: PATH.OBS,\n    authorities: [ROLE.ADMIN]\n  }]\n}, {\n  title: \"로그아웃\",\n  url: \"\",\n  authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN]\n}];\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  title: {\n    flexGrow: 1\n  },\n  appbar: {\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  },\n  toolbar: {\n    backgroundColor: 'rgb(25, 118, 210, 1.0)'\n  },\n  buttonLabel: {\n    textTransform: 'capitalize'\n  },\n  icon: {\n    border: '0',\n    marginRight: '0.2rem'\n  },\n  titleButtonRoot: {\n    border: 0,\n    fontSize: '0.8em',\n    color: '#ffffff'\n  }\n}));\n\nconst Submenu = props => {\n  const {\n    role\n  } = props;\n  const subMenu = authMenus[props.selectedIdx].subMenu;\n  return /*#__PURE__*/_jsxDEV(Popper, {\n    style: {\n      zIndex: 1500\n    },\n    onClose: props.handleClose,\n    open: props.open,\n    anchorEl: props.anchorEl,\n    placement: \"bottom-start\",\n    role: undefined,\n    transition: true,\n    disablePortal: true,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n        mouseEvent: \"onMouseDown\",\n        onClickAway: props.handleClickAway,\n        children: /*#__PURE__*/_jsxDEV(MenuList, {\n          autoFocusItem: props.open,\n          onKeyDown: props.handleClose,\n          children: subMenu && subMenu.map((sub, index) => {\n            if (sub.authorities.includes(role)) {\n              if (authMenus.length - 1 === props.selectedIdx) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  onClick: event => props.handleSubClick(event, props.selectedIdx, index),\n                  children: sub.title\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 41\n                }, this);\n              } else {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  onClick: props.handleClose,\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    component: RouterLink,\n                    to: sub.url,\n                    children: sub.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 45\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 41\n                }, this);\n              }\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Submenu;\n\nconst SubList = props => {\n  const menu = authMenus[props.index];\n  const subMenu = authMenus[props.index].subMenu;\n  const {\n    role\n  } = props;\n  return /*#__PURE__*/_jsxDEV(List, {\n    children: [/*#__PURE__*/_jsxDEV(ListItem, {\n      button: true,\n      children: /*#__PURE__*/_jsxDEV(ListItemText, {\n        children: authMenus.length - 1 !== props.index && menu.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this)\n    }, props.index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this), subMenu && subMenu.map((sub, index) => {\n      let key = props.index + '' + index;\n\n      if (sub.authorities.includes(role)) {\n        if (authMenus.length - 1 === props.index) {\n          return /*#__PURE__*/_jsxDEV(ListItem, {\n            button: true,\n            onClick: event => props.handleSubClick(event, props.index, index),\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              children: sub.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 33\n            }, this)\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(ListItem, {\n            onClick: props.handleClose,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              component: RouterLink,\n              to: sub.url,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                children: sub.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 33\n            }, this)\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this);\n        }\n      }\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n};\n\n_c2 = SubList;\nexport default function Header(props) {\n  _s();\n\n  const history = useHistory();\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [menus, setMenus] = useState(unAuthMenus);\n  const [open, setOpen] = useState(props.open);\n  const [anchorEl, setAnchorEl] = useState(props.anchorEl);\n  const [selectedIdx, setSelectedIdx] = useState(props.selectedIdx);\n  const [drawerOpen, setDrawerOpen] = useState(props.open);\n  const authSelector = useSelector(state => state.auth);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [role, setRole] = useState(ROLE.NONE);\n  useEffect(() => {\n    if (authSelector.role) {\n      const authenticated = authSelector.isAuthenticated;\n      setIsAuthenticated(authenticated);\n      const roles = JSON.parse(authSelector.role);\n      setRole(authenticated ? roles[0].authority : ROLE.NONE);\n      setMenus(authenticated ? authMenus : unAuthMenus);\n    } else {\n      setIsAuthenticated(false);\n      setRole(ROLE.NONE);\n      setMenus(unAuthMenus);\n    }\n  }, [authSelector]);\n\n  const handleClick = (e, index) => {\n    setOpen(anchorEl === e.currentTarget && open ? false : true);\n    setSelectedIdx(index);\n    setAnchorEl(e.currentTarget);\n  };\n\n  const handleClickLogout = e => {\n    logoutUser(dispatch);\n    history.push(PATH.LOGIN);\n  };\n\n  const handleSubClick = (e, index, subIndex) => {\n    handleClose();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setAnchorEl(null);\n    setSelectedIdx(0);\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  const toggleDrawer = open => event => {\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n\n    setDrawerOpen(open);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"fixed\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        className: classes.toolbar,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.icon,\n            src: \"/logo.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          align: \"left\",\n          variant: \"h5\",\n          className: classes.title,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            classes: {\n              root: classes.titleButtonRoot,\n              label: classes.buttonLabel\n            },\n            color: \"inherit\",\n            children: [/*#__PURE__*/_jsxDEV(Hidden, {\n              smDown: true,\n              children: 'Blackice Forensic System'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n              mdUp: true,\n              children: 'BFS'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          smDown: true,\n          children: menus.map((menu, index) => {\n            // eslint-disable-next-line array-callback-return\n            if (!isAuthenticated) {\n              return /*#__PURE__*/_jsxDEV(Button, {\n                classes: {\n                  label: classes.buttonLabel\n                },\n                color: \"inherit\",\n                component: RouterLink,\n                to: menu.url,\n                onClick: event => handleClick(event, index),\n                children: menu.title\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 37\n              }, this);\n            } else {\n              if (menu.authorities.includes(role)) {\n                if (index === menus.length - 1) {\n                  // logout button\n                  return /*#__PURE__*/_jsxDEV(Button, {\n                    classes: {\n                      label: classes.buttonLabel\n                    },\n                    color: \"inherit\",\n                    onClick: event => handleClickLogout(event),\n                    children: menu.title\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 45\n                  }, this);\n                } else if (!menu.subMenu) {\n                  return /*#__PURE__*/_jsxDEV(Button, {\n                    classes: {\n                      label: classes.buttonLabel\n                    },\n                    color: \"inherit\",\n                    component: RouterLink,\n                    to: menu.url,\n                    onClick: event => handleClick(event, index),\n                    children: menu.title\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 45\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(Button, {\n                    classes: {\n                      label: classes.buttonLabel\n                    },\n                    color: \"inherit\",\n                    onClick: event => handleClick(event, index),\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      className: classes.icon,\n                      src: menu.iconPath\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 49\n                    }, this), menu.title, /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/thirdParty/keyboard_arrow_down_white.png\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 278,\n                      columnNumber: 49\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 45\n                  }, this);\n                }\n              }\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          mdUp: true,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            classes: {\n              label: classes.buttonLabel\n            },\n            color: \"inherit\",\n            onClick: toggleDrawer(true),\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Submenu, {\n      handleClick: handleClick,\n      handleClose: handleClose,\n      role: role,\n      open: open,\n      selectedIdx: selectedIdx,\n      anchorEl: anchorEl,\n      handleSubClick: handleSubClick,\n      handleClickAway: handleClickAway\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SwipeableDrawer, {\n      anchor: 'right',\n      open: drawerOpen,\n      onClose: toggleDrawer(false),\n      onOpen: toggleDrawer(true),\n      children: menus.map((menu, index) => {\n        // eslint-disable-next-line array-callback-return\n        if (!isAuthenticated) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(List, {\n              children: /*#__PURE__*/_jsxDEV(ListItem, {\n                button: true,\n                onClick: toggleDrawer(false),\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: menu.url,\n                  component: RouterLink,\n                  children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                    children: menu.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 41\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 33\n            }, this)]\n          }, \"key\" + index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 29\n          }, this);\n        } else {\n          if (menu.authorities.includes(role)) {\n            if (index === menus.length - 1) {\n              // logout button\n              return /*#__PURE__*/_jsxDEV(Button, {\n                classes: {\n                  label: classes.buttonLabel\n                },\n                color: \"inherit\",\n                onClick: event => handleClickLogout(event),\n                children: menu.title\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 37\n              }, this);\n            } else if (!menu.subMenu) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(List, {\n                  children: /*#__PURE__*/_jsxDEV(ListItem, {\n                    button: true,\n                    onClick: toggleDrawer(false),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: menu.url,\n                      component: RouterLink,\n                      children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                        children: menu.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 341,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 340,\n                      columnNumber: 49\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 41\n                }, this)]\n              }, \"key\" + index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 37\n              }, this);\n            } else {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(SubList, {\n                  handleClick: handleClick,\n                  handleClose: toggleDrawer(false),\n                  role: role,\n                  open: open,\n                  index: index,\n                  handleSubClick: handleSubClick\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 41\n                }, this)]\n              }, \"key\" + index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 37\n              }, this);\n            }\n          }\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Header, \"8/vFMbPPpnH7Roi5G503d7On8P4=\", false, function () {\n  return [useHistory, useStyles, useDispatch, useSelector];\n});\n\n_c3 = Header;\nHeader.propTypes = {\n  open: PropTypes.bool,\n  anchorEl: PropTypes.object,\n  selectedIdx: PropTypes.number\n};\nHeader.defaultProps = {\n  open: false,\n  anchorEl: null,\n  selectedIdx: 0\n};\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Submenu\");\n$RefreshReg$(_c2, \"SubList\");\n$RefreshReg$(_c3, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useDispatch","useSelector","logoutUser","PropTypes","Link","RouterLink","useHistory","makeStyles","Paper","Popper","MenuItem","MenuList","Box","SwipeableDrawer","List","ListItem","ListItemText","Divider","AppBar","ClickAwayListener","Toolbar","Typography","Button","Hidden","MenuIcon","PATH","ROLE","unAuthMenus","title","url","LOGIN","authMenus","DASHBOARD","authorities","USER","LICENSE","ADMIN","RISK_ANAYSIS_LIST","subMenu","OBSERVATION","OBSERVATION_ROAD","OBSERVATION_MODEL","ADMIN_ACCIDENT_LIST","ADMIN_OBSERVATORY_LIST","ADMIN_CODE_INFO","ADMIN_ROAD_INFO","ADMIN_USER_LIST","ADMIN_USER_READ","OBS","useStyles","theme","root","flexGrow","appbar","backgroundColor","toolbar","buttonLabel","textTransform","icon","border","marginRight","titleButtonRoot","fontSize","color","Submenu","props","role","selectedIdx","zIndex","handleClose","open","anchorEl","undefined","handleClickAway","map","sub","index","includes","length","event","handleSubClick","SubList","menu","key","Header","history","classes","dispatch","menus","setMenus","setOpen","setAnchorEl","setSelectedIdx","drawerOpen","setDrawerOpen","authSelector","state","auth","isAuthenticated","setIsAuthenticated","setRole","NONE","authenticated","roles","JSON","parse","authority","handleClick","e","currentTarget","handleClickLogout","push","subIndex","toggleDrawer","type","label","iconPath","propTypes","bool","object","number","defaultProps"],"sources":["/Users/eastroad/workspace/shorts-admin/shorts-admin-client/src/components/common/Header.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logoutUser } from './../state/reducers/authReducer';\n\nimport PropTypes from 'prop-types';\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Popper, Link, MenuItem, MenuList, Box, SwipeableDrawer, List, ListItem, ListItemText, Divider } from '@material-ui/core';\nimport { AppBar, ClickAwayListener, Toolbar, Typography, Button, Hidden } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport { PATH, ROLE } from './Constants'\n\nconst unAuthMenus = [\n    { title: \"로그인\", url: PATH.LOGIN },\n]\n\nconst authMenus = [\n    { title: \"Home\", url: PATH.DASHBOARD, authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN] },\n    // { title: \"승인회원신청\", url: PATH.LICENSE_REQUIRE, authorities: [ROLE.USER] },\n    {\n        title: \"위험분석\", url: PATH.RISK_ANAYSIS_LIST, authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n        // subMenu: [\n        //     { title: \"사건 등록\", url: PATH.ACCIDENT_CREATE, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n        //     { title: \"진단 결과 조회\", url: PATH.ACCIDENT_RESULT, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n        //     { title: \"감정서 입력\", url: PATH.ACCIDENT_CREATE, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n        //     { title: \"감정서 조회\", url: PATH.ACCIDENT_PREVIEW, authorities: [ ROLE.USER, ROLE.LICENSE, ROLE.ADMIN ] },\n        // ]\n    },\n    {\n        title: \"예·관측 자료\", url: '', authorities: [ROLE.LICENSE, ROLE.ADMIN],\n        subMenu: [\n            { title: \"관측 자료\", url: PATH.OBSERVATION, authorities: [ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"노면 온도 맵\", url: PATH.OBSERVATION_ROAD, authorities: [ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"모델 결과\", url: PATH.OBSERVATION_MODEL, authorities: [ROLE.LICENSE, ROLE.ADMIN] },\n        ]\n    },\n    {\n        title: \"관리\", url: '', authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n        subMenu: [\n            { title: \"위험 분석\", url: PATH.ADMIN_ACCIDENT_LIST, authorities: [ROLE.ADMIN] },\n            { title: \"관측소\", url: PATH.ADMIN_OBSERVATORY_LIST, authorities: [ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"코드\", url: PATH.ADMIN_CODE_INFO, authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"도로관리\", url: PATH.ADMIN_ROAD_INFO, authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"계정 관리\", url: PATH.ADMIN_USER_LIST, authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN] },\n            { title: \"사용자 관리\", url: PATH.ADMIN_USER_READ, authorities: [ROLE.ADMIN] }\n        ]\n    },\n    {\n        title: \"테스트\", url: '', authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n        subMenu: [\n            { title: \"대시보드\", url: PATH.OBS, authorities: [ROLE.ADMIN] },\n        ]\n    },\n    {\n        title: \"로그아웃\", url: \"\", authorities: [ROLE.USER, ROLE.LICENSE, ROLE.ADMIN],\n    }\n];\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1,\n    },\n    title: {\n        flexGrow: 1,\n    },\n    appbar: {\n        backgroundColor: 'rgba(0, 0, 0, 0)',\n    },\n    toolbar: {\n        backgroundColor: 'rgb(25, 118, 210, 1.0)',\n    },\n    buttonLabel: {\n        textTransform: 'capitalize',\n    },\n    icon: {\n        border: '0',\n        marginRight: '0.2rem',\n    },\n    titleButtonRoot: {\n        border: 0,\n        fontSize: '0.8em',\n        color: '#ffffff',\n    }\n}));\n\nconst Submenu = (props) => {\n\n    const { role } = props;\n    const subMenu = authMenus[props.selectedIdx].subMenu;\n    return (\n        <Popper style={{ zIndex: 1500 }} onClose={props.handleClose} open={props.open} anchorEl={props.anchorEl} placement=\"bottom-start\" role={undefined} transition disablePortal={true}>\n            <Paper>\n                <ClickAwayListener mouseEvent=\"onMouseDown\" onClickAway={props.handleClickAway}>\n                    <MenuList autoFocusItem={props.open} onKeyDown={props.handleClose}>\n                        {subMenu && subMenu.map((sub, index) => {\n                            if (sub.authorities.includes(role)) {\n                                if (authMenus.length - 1 === props.selectedIdx) {\n                                    return (\n                                        <MenuItem key={index} onClick={(event) => props.handleSubClick(event, props.selectedIdx, index)}>\n                                            {sub.title}\n                                        </MenuItem>\n                                    )\n                                } else {\n                                    return (\n                                        <MenuItem key={index} onClick={props.handleClose}>\n                                            <Link component={RouterLink} to={sub.url}>\n                                                {sub.title}\n                                            </Link>\n                                        </MenuItem>\n                                    );\n                                }\n                            }\n                        })}\n                    </MenuList>\n                </ClickAwayListener>\n            </Paper>\n        </Popper>\n    );\n}\n\n\nconst SubList = (props) => {\n\n    const menu = authMenus[props.index];\n    const subMenu = authMenus[props.index].subMenu;\n    const { role } = props;\n    return (\n        <List>\n            <ListItem button key={props.index}>\n                <ListItemText>\n                    {authMenus.length - 1 !== props.index && menu.title}\n                </ListItemText>\n            </ListItem>\n            {subMenu && subMenu.map((sub, index) => {\n                let key = props.index + '' + index;\n                if (sub.authorities.includes(role)) {\n                    if (authMenus.length - 1 === props.index) {\n                        return (\n                            <ListItem button key={key} onClick={(event) => props.handleSubClick(event, props.index, index)}>\n                                <ListItemText>\n                                    {sub.title}\n                                </ListItemText>\n                            </ListItem>\n                        )\n                    } else {\n                        return (\n                            <ListItem key={key} onClick={props.handleClose}>\n                                <Link component={RouterLink} to={sub.url}>\n                                    <ListItemText>\n                                        {sub.title}\n                                    </ListItemText>\n                                </Link>\n                            </ListItem>\n                        );\n                    }\n                }\n            })}\n        </List>\n    );\n}\n\nexport default function Header(props) {\n\n    const history = useHistory();\n\n    const classes = useStyles();\n\n    const dispatch = useDispatch();\n\n    const [menus, setMenus] = useState(unAuthMenus);\n    const [open, setOpen] = useState(props.open);\n    const [anchorEl, setAnchorEl] = useState(props.anchorEl);\n    const [selectedIdx, setSelectedIdx] = useState(props.selectedIdx);\n\n    const [drawerOpen, setDrawerOpen] = useState(props.open);\n\n    const authSelector = useSelector(state => state.auth);\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [role, setRole] = useState(ROLE.NONE);\n\n    useEffect(() => {\n        if (authSelector.role) {\n            const authenticated = authSelector.isAuthenticated;\n            setIsAuthenticated(authenticated);\n\n            const roles = JSON.parse(authSelector.role);\n\n            setRole(authenticated ? roles[0].authority : ROLE.NONE);\n            setMenus(authenticated ? authMenus : unAuthMenus)\n        } else {\n            setIsAuthenticated(false);\n            setRole(ROLE.NONE);\n            setMenus(unAuthMenus)\n        }\n    }, [authSelector]);\n\n\n    const handleClick = (e, index) => {\n        setOpen(anchorEl === e.currentTarget && open ? false : true);\n        setSelectedIdx(index);\n        setAnchorEl(e.currentTarget);\n    }\n\n    const handleClickLogout = (e) => {\n        logoutUser(dispatch);\n        history.push(PATH.LOGIN);\n    }\n\n    const handleSubClick = (e, index, subIndex) => {\n        handleClose();\n    }\n\n    const handleClose = () => {\n        setOpen(false);\n        setAnchorEl(null);\n        setSelectedIdx(0);\n    }\n\n    const handleClickAway = () => {\n        setOpen(false);\n    }\n\n    const toggleDrawer = (open) => (event) => {\n\n        if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n            return;\n        }\n        setDrawerOpen(open);\n    };\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"fixed\">\n                <Toolbar className={classes.toolbar}>\n                    <Box>\n                        <img className={classes.icon} src=\"/logo.png\"></img>\n                    </Box>\n                    <Typography align=\"left\" variant=\"h5\" className={classes.title}>\n                        <Button classes={{ root: classes.titleButtonRoot, label: classes.buttonLabel }} color=\"inherit\">\n                            <Hidden smDown>\n                                {'Blackice Forensic System'}\n                            </Hidden>\n                            <Hidden mdUp>\n                                {'BFS'}\n                            </Hidden>\n                        </Button>\n                    </Typography>\n                    <Hidden smDown>\n                        {menus.map((menu, index) => {\n                            // eslint-disable-next-line array-callback-return\n                            if (!isAuthenticated) {\n                                return (\n                                    <Button key={index} classes={{ label: classes.buttonLabel }} color=\"inherit\" component={RouterLink} to={menu.url} onClick={(event) => handleClick(event, index)}>\n                                        {menu.title}\n                                    </Button>\n                                );\n                            } else {\n                                if (menu.authorities.includes(role)) {\n                                    if (index === menus.length - 1) {   // logout button\n                                        return (\n                                            <Button key={index} classes={{ label: classes.buttonLabel }} color=\"inherit\" onClick={(event) => handleClickLogout(event)}>\n                                                {menu.title}\n                                            </Button>\n                                        );\n                                    } else if (!menu.subMenu) {\n                                        return (\n                                            <Button key={index} classes={{ label: classes.buttonLabel }} color=\"inherit\" component={RouterLink} to={menu.url} onClick={(event) => handleClick(event, index)}>\n                                                {menu.title}\n                                            </Button>\n                                        );\n                                    } else {\n                                        return (\n                                            <Button key={index} classes={{ label: classes.buttonLabel }} color=\"inherit\" onClick={(event) => handleClick(event, index)}>\n                                                <img className={classes.icon} src={menu.iconPath} />\n                                                {menu.title}\n                                                <img src='/thirdParty/keyboard_arrow_down_white.png' />\n                                            </Button>\n                                        );\n                                    }\n                                }\n                            }\n                        })}\n                    </Hidden>\n                    <Hidden mdUp>\n                        <Button classes={{ label: classes.buttonLabel }} color=\"inherit\" onClick={toggleDrawer(true)}>\n                            <MenuIcon></MenuIcon>\n                        </Button>\n                    </Hidden>\n                </Toolbar>\n            </AppBar>\n\n            <Submenu\n                handleClick={handleClick}\n                handleClose={handleClose}\n                role={role}\n                open={open}\n                selectedIdx={selectedIdx}\n                anchorEl={anchorEl}\n                handleSubClick={handleSubClick}\n                handleClickAway={handleClickAway} />\n\n            <SwipeableDrawer\n                anchor={'right'}\n                open={drawerOpen}\n                onClose={toggleDrawer(false)}\n                onOpen={toggleDrawer(true)}\n            >\n                {menus.map((menu, index) => {\n                    // eslint-disable-next-line array-callback-return\n                    if (!isAuthenticated) {\n                        return (\n                            <div key={\"key\" + index}>\n                                <List>\n                                    <ListItem button key={index} onClick={toggleDrawer(false)}>\n                                        <Link to={menu.url} component={RouterLink}>\n                                            <ListItemText>\n                                                {menu.title}\n                                            </ListItemText>\n                                        </Link>\n                                    </ListItem>\n                                </List>\n                                <Divider></Divider>\n                            </div>\n                        );\n                    } else {\n                        if (menu.authorities.includes(role)) {\n                            if (index === menus.length - 1) {   // logout button\n                                return (\n                                    <Button key={index} classes={{ label: classes.buttonLabel }} color=\"inherit\" onClick={(event) => handleClickLogout(event)}>\n                                        {menu.title}\n                                    </Button>\n                                );\n                            } else if (!menu.subMenu) {\n                                return (\n                                    <div key={\"key\" + index}>\n                                        <List>\n                                            <ListItem button key={index} onClick={toggleDrawer(false)}>\n                                                <Link to={menu.url} component={RouterLink}>\n                                                    <ListItemText>\n                                                        {menu.title}\n                                                    </ListItemText>\n                                                </Link>\n                                            </ListItem>\n                                        </List>\n                                        <Divider></Divider>\n                                    </div>\n                                );\n                            } else {\n                                return (\n                                    <div key={\"key\" + index}>\n                                        <SubList\n                                            handleClick={handleClick}\n                                            handleClose={toggleDrawer(false)}\n                                            role={role}\n                                            open={open}\n                                            index={index}\n                                            handleSubClick={handleSubClick} />\n                                        <Divider></Divider>\n                                    </div>\n                                )\n                            }\n                        }\n                    }\n                })}\n            </SwipeableDrawer>\n        </div>\n    );\n}\n\n\nHeader.propTypes = {\n    open: PropTypes.bool,\n    anchorEl: PropTypes.object,\n    selectedIdx: PropTypes.number,\n}\n\nHeader.defaultProps = {\n    open: false,\n    anchorEl: null,\n    selectedIdx: 0,\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}